{
	"info": {
		"name": "TopiaTests",
		"_postman_id": "f655eba4-8797-fc29-8e90-d768c8d43883",
		"description": "API tests that Jenkins will run.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Profile",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"let schema = {",
							"    type: \"object\",",
							"    properties: {",
							"        username: { type: \"string\" },",
							"        prefs_jobs_postedDate: { type: \"number\" },",
							"        last_updated: { type: \"number\" },",
							"        prefs_jobs_titles: { type: \"array\" },",
							"        cityMatch: { type: \"object\" },",
							"        prefs_jobs_saved: { type: \"array\" },",
							"        prefs_jobs_types: { type: \"array\" },",
							"",
							"    },",
							"    required: [\"username\"]",
							"};",
							"",
							"pm.test('Schema is valid', function() {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(tv4.validate(jsonData, schema)).to.be.true;",
							"});",
							"",
							"pm.test(\"Correct profile returned\", function () {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(jsonData.username).to.eql(\"dev\");",
							"});",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"// Set profile to env variables for later testing",
							"pm.environment.set(\"prefs_jobs_postedDate\", pm.response.json()[\"prefs_jobs_postedDate\"]);",
							"pm.environment.set(\"email\", pm.response.json()[\"email\"]);",
							"pm.environment.set(\"last_updated\", pm.response.json()[\"last_updated\"]);",
							"pm.environment.set(\"prefs_jobs_titles\", JSON.stringify( pm.response.json()[\"prefs_jobs_titles\"] ) );",
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "topiadev",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [],
				"body": {},
				"url": {
					"raw": "topia-env-development.us-west-2.elasticbeanstalk.com/users/profile",
					"host": [
						"topia-env-development",
						"us-west-2",
						"elasticbeanstalk",
						"com"
					],
					"path": [
						"users",
						"profile"
					]
				},
				"description": "Get profile test\n\nNOTE: This also sets some env variables for the remaining PM tests to use. MUST be run first."
			},
			"response": []
		},
		{
			"name": "CompanyInformation",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"let schema = {",
							"    type: \"object\",",
							"    properties: {",
							"        \"id\": { type: \"number\" },",
							"        \"name\": { type: \"string\" },",
							"        \"website\": { type: \"string\" },",
							"        \"isEEP\": { type: \"boolean\" },",
							"        \"exactMatch\": { type: \"boolean\" },",
							"        \"industry\": { type: \"string\" },",
							"        \"numberOfRatings\": { type: \"number\" },",
							"        \"squareLogo\": { type: \"string\" },",
							"        \"overallRating\": { type: \"string\" },",
							"        \"ratingDescription\": { type: \"string\" },",
							"        \"cultureAndValuesRating\": { type: \"string\" },",
							"        \"seniorLeadershipRating\": { type: \"string\" },",
							"        \"compensationAndBenefitsRating\": { type: \"string\" },",
							"        \"careerOpportunitiesRating\": { type: \"string\" },",
							"        \"workLifeBalanceRating\": { type: \"string\" },",
							"        \"recommendToFriendRating\": { type: \"number\" },",
							"        \"sectorId\": { type: \"number\" },",
							"        \"sectorName\": { type: \"string\" },",
							"        \"industryId\": { type: \"number\" },",
							"        \"industryName\": { type: \"string\" },",
							"        \"ceo\": {",
							"            type: \"object\",",
							"            properties: {",
							"                \"name\": { type: \"string\" },",
							"                \"title\": { type: \"string\" },",
							"                \"numberOfRatings\": { type: \"number\" },",
							"                \"pctApprove\": { type: \"number\" },",
							"                \"pctDisapprove\": { type: \"number\" },",
							"                \"image\": {",
							"                    type: \"object\",",
							"                    properties: {",
							"                        \"src\": { type: \"string\" },",
							"                        \"height\": { type: \"number\" },",
							"                        \"width\": { type: \"number\" }",
							"                    },",
							"                    \"additionalProperties\": false,",
							"                    \"minProperties\": 3",
							"                }",
							"            },",
							"            \"additionalProperties\": false,",
							"            \"minProperties\": 6",
							"        }",
							"    },",
							"    \"additionalProperties\": false,",
							"    \"minProperties\": 21",
							"};",
							"",
							"pm.test('Schema is valid', function() {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(tv4.validate(jsonData, schema)).to.be.true;",
							"});",
							"",
							"pm.test(\"Correct company returned\", function () {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(jsonData.name).to.eql(\"Viasat\");",
							"});",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});"
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "topiadev",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [],
				"body": {},
				"url": {
					"raw": "topia-env-development.us-west-2.elasticbeanstalk.com/jobs/companies/viasat",
					"host": [
						"topia-env-development",
						"us-west-2",
						"elasticbeanstalk",
						"com"
					],
					"path": [
						"jobs",
						"companies",
						"viasat"
					]
				},
				"description": "/search/jobs/companyinfo endpoint"
			},
			"response": []
		},
		{
			"name": "JobByKey",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"const JOB_KEY = \"db283ce475405c88\";",
							"const JOB_COMPANY = \"Smarte Carte, Inc.\"",
							"",
							"let schema = {",
							"    type: \"object\",",
							"    properties: {",
							"        \"jobtitle\": { type:\"string\" },",
							"        \"company\": { type:\"string\" },",
							"        \"city\": { type:\"string\" },",
							"        \"state\": { type:\"string\" },",
							"        \"country\": { type:\"string\" },",
							"        \"language\": { type:\"string\" },",
							"        \"formattedLocation\": { type:\"string\" },",
							"        \"source\": { type:\"string\" },",
							"        \"date\": { type:\"string\" },",
							"        \"snippet\": { type:\"string\" },",
							"        \"url\": { type:\"string\" },",
							"        \"onmousedown\": { type:\"string\" },",
							"        \"latitude\": { type:\"number\" },",
							"        \"longitude\": { type:\"number\" },",
							"        \"jobkey\": { type:\"string\" },",
							"        \"sponsored\":{ type:\"boolean\" },",
							"        \"expired\": { type:\"boolean\" },",
							"        \"indeedApply\": { type:\"boolean\" },",
							"        \"formattedLocationFull\": { type:\"string\" },",
							"        \"formattedRelativeTime\": { type:\"string\" },",
							"        \"stations\": { type:\"string\" },",
							"        \"recommendations\": { type:\"array\" },",
							"    },",
							"    \"additionalProperties\": false,",
							"    \"minProperties\": 22",
							"};",
							"",
							"pm.test('Schema is valid', function() {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(tv4.validate(jsonData, schema)).to.be.true;",
							"});",
							"",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Correct job returned\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.jobkey).to.eql(JOB_KEY);",
							"});",
							"",
							"pm.test(\"Correct job information returned\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.company).to.eql(JOB_COMPANY);",
							"});"
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "topiadev",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [],
				"body": {},
				"url": {
					"raw": "topia-env-development.us-west-2.elasticbeanstalk.com/jobs/db283ce475405c88",
					"host": [
						"topia-env-development",
						"us-west-2",
						"elasticbeanstalk",
						"com"
					],
					"path": [
						"jobs",
						"db283ce475405c88"
					]
				},
				"description": "This may fail if a job has been expired for long enough."
			},
			"response": []
		},
		{
			"name": "JobsByCoordinates",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"let schema = {",
							"    type: \"array\",",
							"};",
							"",
							"let schemaLocationObj = {",
							"    type: \"object\",",
							"    properties: {",
							"        \"latitude\": { type: \"number\" },",
							"        \"longitude\": { type: \"number\" },",
							"        \"jobs\": { type: \"array\" }",
							"    }",
							"}",
							"",
							"let schemaElem = {",
							"    type: \"object\",",
							"    properties: {",
							"        \"jobtitle\": { type:\"string\" },",
							"        \"company\": { type:\"string\" },",
							"        \"city\": { type:\"string\" },",
							"        \"state\": { type:\"string\" },",
							"        \"country\": { type:\"string\" },",
							"        \"language\": { type:\"string\" },",
							"        \"formattedLocation\": { type:\"string\" },",
							"        \"source\": { type:\"string\" },",
							"        \"date\": { type:\"string\" },",
							"        \"snippet\": { type:\"string\" },",
							"        \"url\": { type:\"string\" },",
							"        \"onmousedown\": { type:\"string\" },",
							"        \"latitude\": { type:\"number\" },",
							"        \"longitude\": { type:\"number\" },",
							"        \"jobkey\": { type:\"string\" },",
							"        \"sponsored\":{ type:\"boolean\" },",
							"        \"expired\": { type:\"boolean\" },",
							"        \"indeedApply\": { type:\"boolean\" },",
							"        \"formattedLocationFull\": { type:\"string\" },",
							"        \"formattedRelativeTime\": { type:\"string\" },",
							"        \"stations\": { type:\"string\" },",
							"    },",
							"    \"minProperties\": 21",
							"};",
							"",
							"pm.test('Element schema is valid', function() {",
							"    let jsonData = pm.response.json();",
							"    // We only care about this test if we actually got a result back",
							"    if( jsonData.length > 0 ){",
							"        let locationObj = jsonData[0];",
							"        pm.expect(tv4.validate(locationObj, schemaLocationObj)).to.be.true;",
							"        pm.expect(tv4.validate(locationObj.jobs[0], schemaElem)).to.be.true;",
							"    }",
							"});",
							"",
							"pm.test('A populated array was returned', function() {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(tv4.validate(jsonData, schema)).to.be.true;",
							"    pm.expect(jsonData.length > 0).to.be.true",
							"});",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "topiadev",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [],
				"body": {},
				"url": {
					"raw": "topia-env-development.us-west-2.elasticbeanstalk.com/jobs?type=coordinates&lat=40.766538&long=-73.977849&limit=100&radius=20",
					"host": [
						"topia-env-development",
						"us-west-2",
						"elasticbeanstalk",
						"com"
					],
					"path": [
						"jobs"
					],
					"query": [
						{
							"key": "type",
							"value": "coordinates",
							"equals": true
						},
						{
							"key": "lat",
							"value": "40.766538",
							"equals": true
						},
						{
							"key": "long",
							"value": "-73.977849",
							"equals": true
						},
						{
							"key": "limit",
							"value": "100",
							"equals": true
						},
						{
							"key": "radius",
							"value": "20",
							"equals": true
						}
					]
				},
				"description": ""
			},
			"response": []
		},
		{
			"name": "JobsByZip",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"let schema = {",
							"    type: \"array\",",
							"};",
							"",
							"let schemaLocationObj = {",
							"    type: \"object\",",
							"    properties: {",
							"        \"latitude\": { type: \"number\" },",
							"        \"longitude\": { type: \"number\" },",
							"        \"jobs\": { type: \"array\" }",
							"    }",
							"}",
							"",
							"let schemaElem = {",
							"    type: \"object\",",
							"    properties: {",
							"        \"jobtitle\": { type:\"string\" },",
							"        \"company\": { type:\"string\" },",
							"        \"city\": { type:\"string\" },",
							"        \"state\": { type:\"string\" },",
							"        \"country\": { type:\"string\" },",
							"        \"language\": { type:\"string\" },",
							"        \"formattedLocation\": { type:\"string\" },",
							"        \"source\": { type:\"string\" },",
							"        \"date\": { type:\"string\" },",
							"        \"snippet\": { type:\"string\" },",
							"        \"url\": { type:\"string\" },",
							"        \"onmousedown\": { type:\"string\" },",
							"        \"latitude\": { type:\"number\" },",
							"        \"longitude\": { type:\"number\" },",
							"        \"jobkey\": { type:\"string\" },",
							"        \"sponsored\":{ type:\"boolean\" },",
							"        \"expired\": { type:\"boolean\" },",
							"        \"indeedApply\": { type:\"boolean\" },",
							"        \"formattedLocationFull\": { type:\"string\" },",
							"        \"formattedRelativeTime\": { type:\"string\" },",
							"        \"stations\": { type:\"string\" },",
							"    },",
							"    \"minProperties\": 21",
							"};",
							"",
							"pm.test('Element schema is valid', function() {",
							"    let jsonData = pm.response.json();",
							"    // We only care about this test if we actually got a result back",
							"    if( jsonData.length > 0 ){",
							"        let locationObj = jsonData[0];",
							"        pm.expect(tv4.validate(locationObj, schemaLocationObj)).to.be.true;",
							"        pm.expect(tv4.validate(locationObj.jobs[0], schemaElem)).to.be.true;",
							"    }",
							"});",
							"",
							"pm.test('A populated array was returned', function() {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(tv4.validate(jsonData, schema)).to.be.true;",
							"    pm.expect(jsonData.length > 0).to.be.true",
							"});",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "topiadev",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [],
				"body": {},
				"url": {
					"raw": "topia-env-development.us-west-2.elasticbeanstalk.com/jobs?type=zip&zip=85212&limit=200&radius=21",
					"host": [
						"topia-env-development",
						"us-west-2",
						"elasticbeanstalk",
						"com"
					],
					"path": [
						"jobs"
					],
					"query": [
						{
							"key": "type",
							"value": "zip",
							"equals": true
						},
						{
							"key": "zip",
							"value": "85212",
							"equals": true
						},
						{
							"key": "limit",
							"value": "200",
							"equals": true
						},
						{
							"key": "radius",
							"value": "21",
							"equals": true
						}
					]
				},
				"description": ""
			},
			"response": []
		},
		{
			"name": "JobsByLocation",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"let schema = {",
							"    type: \"array\",",
							"};",
							"",
							"let schemaLocationObj = {",
							"    type: \"object\",",
							"    properties: {",
							"        \"latitude\": { type: \"number\" },",
							"        \"longitude\": { type: \"number\" },",
							"        \"jobs\": { type: \"array\" }",
							"    }",
							"}",
							"",
							"let schemaElem = {",
							"    type: \"object\",",
							"    properties: {",
							"        \"jobtitle\": { type:\"string\" },",
							"        \"company\": { type:\"string\" },",
							"        \"city\": { type:\"string\" },",
							"        \"state\": { type:\"string\" },",
							"        \"country\": { type:\"string\" },",
							"        \"language\": { type:\"string\" },",
							"        \"formattedLocation\": { type:\"string\" },",
							"        \"source\": { type:\"string\" },",
							"        \"date\": { type:\"string\" },",
							"        \"snippet\": { type:\"string\" },",
							"        \"url\": { type:\"string\" },",
							"        \"onmousedown\": { type:\"string\" },",
							"        \"latitude\": { type:\"number\" },",
							"        \"longitude\": { type:\"number\" },",
							"        \"jobkey\": { type:\"string\" },",
							"        \"sponsored\":{ type:\"boolean\" },",
							"        \"expired\": { type:\"boolean\" },",
							"        \"indeedApply\": { type:\"boolean\" },",
							"        \"formattedLocationFull\": { type:\"string\" },",
							"        \"formattedRelativeTime\": { type:\"string\" },",
							"        \"stations\": { type:\"string\" },",
							"    },",
							"    \"minProperties\": 21",
							"};",
							"",
							"pm.test('Element schema is valid', function() {",
							"    let jsonData = pm.response.json();",
							"    // We only care about this test if we actually got a result back",
							"    if( jsonData.length > 0 ){",
							"        let locationObj = jsonData[0];",
							"        pm.expect(tv4.validate(locationObj, schemaLocationObj)).to.be.true;",
							"        pm.expect(tv4.validate(locationObj.jobs[0], schemaElem)).to.be.true;",
							"    }",
							"});",
							"",
							"pm.test('A populated array was returned', function() {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(tv4.validate(jsonData, schema)).to.be.true;",
							"    pm.expect(jsonData.length > 0).to.be.true",
							"});",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "topiadev",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [],
				"body": {},
				"url": {
					"raw": "topia-env-development.us-west-2.elasticbeanstalk.com/jobs?type=location&city=Seattle&state=WA&limit=300&radius=200",
					"host": [
						"topia-env-development",
						"us-west-2",
						"elasticbeanstalk",
						"com"
					],
					"path": [
						"jobs"
					],
					"query": [
						{
							"key": "type",
							"value": "location",
							"equals": true
						},
						{
							"key": "city",
							"value": "Seattle",
							"equals": true
						},
						{
							"key": "state",
							"value": "WA",
							"equals": true
						},
						{
							"key": "limit",
							"value": "300",
							"equals": true
						},
						{
							"key": "radius",
							"value": "200",
							"equals": true
						}
					]
				},
				"description": ""
			},
			"response": []
		},
		{
			"name": "SaveJob",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"",
							"const JOB_KEY = \"455ba8b70208e25b\"",
							"",
							"// This will need to be updated once the job table is added",
							"pm.sendRequest({",
							"    url: \"topia-env-development.us-west-2.elasticbeanstalk.com/users/profile\",",
							"    method: 'GET',",
							"    header: 'Authorization:Bearer topiadev',",
							"    }, function (err, response) {",
							"    pm.test('Contains new job', function() {",
							"        let jsonData = response.json();",
							"        jsonData = jsonData[\"prefs_jobs_saved\"];",
							"        let contains = false;",
							"        ",
							"        for( let i = 0; i < jsonData.length; i++ ){",
							"            if( jsonData[i].jobkey == JOB_KEY ){",
							"                contains = true;",
							"            }",
							"        }",
							"        ",
							"        pm.expect(contains).to.be.true;",
							"    });",
							"});",
							"",
							"pm.test('No error', function() {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(jsonData.err).to.be.undefined;",
							"});",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});"
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "topiadev",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/x-www-form-urlencoded"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "jobkey",
							"value": "455ba8b70208e25b",
							"description": "",
							"type": "text"
						},
						{
							"key": "type",
							"value": "add",
							"description": "",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "topia-env-development.us-west-2.elasticbeanstalk.com/users/profile/jobs",
					"host": [
						"topia-env-development",
						"us-west-2",
						"elasticbeanstalk",
						"com"
					],
					"path": [
						"users",
						"profile",
						"jobs"
					]
				},
				"description": ""
			},
			"response": []
		},
		{
			"name": "RemoveJob",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"",
							"const JOB_KEY = \"455ba8b70208e25b\"",
							"",
							"// This will need to be updated once the job table is added",
							"// DELAY START - remove when the job table is added",
							"function pausecomp(millis)",
							" {",
							"  var date = new Date();",
							"  var curDate = null;",
							"  do { curDate = new Date(); }",
							"  while(curDate-date < millis);",
							"}",
							"pausecomp(5000);",
							"// DELAY END",
							"",
							"pm.sendRequest({",
							"    url: \"topia-env-development.us-west-2.elasticbeanstalk.com/users/profile\",",
							"    method: 'GET',",
							"    header: 'Authorization:Bearer topiadev',",
							"    }, function (err, response) {",
							"    pm.test('Does not contain new job', function() {",
							"        let jsonData = response.json();",
							"        jsonData = jsonData[\"prefs_jobs_saved\"];",
							"        let contains = false;",
							"        ",
							"        for( let i = 0; i < jsonData.length; i++ ){",
							"            if( jsonData[i].jobkey == JOB_KEY ){",
							"                contains = true;",
							"            }",
							"        }",
							"        ",
							"        pm.expect(contains).to.be.false;",
							"    });",
							"});",
							"",
							"pm.test('No error', function() {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(jsonData.err).to.be.undefined;",
							"});",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});"
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "topiadev",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/x-www-form-urlencoded"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "jobkey",
							"value": "455ba8b70208e25b",
							"description": "",
							"type": "text"
						},
						{
							"key": "type",
							"value": "remove",
							"description": "",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "topia-env-development.us-west-2.elasticbeanstalk.com/users/profile/jobs",
					"host": [
						"topia-env-development",
						"us-west-2",
						"elasticbeanstalk",
						"com"
					],
					"path": [
						"users",
						"profile",
						"jobs"
					]
				},
				"description": ""
			},
			"response": []
		},
		{
			"name": "Modify_Modify",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"",
							"const TEST_VAL = 34",
							"",
							"pm.sendRequest({",
							"    url: \"topia-env-development.us-west-2.elasticbeanstalk.com/users/profile\",",
							"    method: 'GET',",
							"    header: { Authorization:'Bearer topiadev' },",
							"    }, function (err, response) {",
							"    pm.test('Value has changed', function() {",
							"        let jsonData = response.json();",
							"        jsonData = jsonData[\"prefs_jobs_postedDate\"];",
							"        pm.expect(jsonData === TEST_VAL).to.be.true;",
							"    });",
							"});",
							"",
							"pm.test('No error', function() {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(jsonData.err).to.be.undefined;",
							"});",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});"
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "topiadev",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/x-www-form-urlencoded"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "mode",
							"value": "modify",
							"description": "",
							"type": "text"
						},
						{
							"key": "key",
							"value": "prefs_jobs_postedDate",
							"description": "",
							"type": "text"
						},
						{
							"key": "value",
							"value": "34",
							"description": "",
							"type": "text"
						},
						{
							"key": "type",
							"value": "single",
							"description": "",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "topia-env-development.us-west-2.elasticbeanstalk.com/users/profile",
					"host": [
						"topia-env-development",
						"us-west-2",
						"elasticbeanstalk",
						"com"
					],
					"path": [
						"users",
						"profile"
					]
				},
				"description": "Using the modify mode."
			},
			"response": []
		},
		{
			"name": "Modify_Modify Cleanup",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"",
							"pm.sendRequest({",
							"    url: \"topia-env-development.us-west-2.elasticbeanstalk.com/users/profile\",",
							"    method: 'GET',",
							"    header: { Authorization:'Bearer topiadev' },",
							"    }, function (err, response) {",
							"    pm.test('Value has changed', function() {",
							"        let jsonData = response.json();",
							"        let expected = parseInt(pm.environment.get(\"prefs_jobs_postedDate\"));",
							"        jsonData = jsonData[\"prefs_jobs_postedDate\"];",
							"        pm.expect(jsonData === expected).to.be.true;",
							"    });",
							"});",
							"",
							"pm.test('No error', function() {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(jsonData.err).to.be.undefined;",
							"});",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "topiadev",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/x-www-form-urlencoded"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "mode",
							"value": "modify",
							"description": "",
							"type": "text"
						},
						{
							"key": "key",
							"value": "prefs_jobs_postedDate",
							"description": "",
							"type": "text"
						},
						{
							"key": "value",
							"value": "{{prefs_jobs_postedDate}}",
							"description": "",
							"type": "text"
						},
						{
							"key": "type",
							"value": "single",
							"description": "",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "topia-env-development.us-west-2.elasticbeanstalk.com/users/profile",
					"host": [
						"topia-env-development",
						"us-west-2",
						"elasticbeanstalk",
						"com"
					],
					"path": [
						"users",
						"profile"
					]
				},
				"description": "Using the modify mode."
			},
			"response": []
		},
		{
			"name": "Modify_Remove",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"",
							"",
							"// This will need to be updated once the job table is added",
							"pm.sendRequest({",
							"    url: \"topia-env-development.us-west-2.elasticbeanstalk.com/users/profile\",",
							"    method: 'GET',",
							"    header: { Authorization:'Bearer topiadev' },",
							"    }, function (err, response) {",
							"    pm.test('Value has changed', function() {",
							"        let jsonData = response.json();",
							"        jsonData = jsonData[\"email\"];",
							"        pm.expect(!jsonData).to.be.true;",
							"    });",
							"});",
							"",
							"pm.test('No error', function() {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(jsonData.err).to.be.undefined;",
							"});",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});"
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "topiadev",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/x-www-form-urlencoded"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "mode",
							"value": "remove",
							"description": "",
							"type": "text"
						},
						{
							"key": "key",
							"value": "email",
							"description": "",
							"type": "text"
						},
						{
							"key": "type",
							"value": "single",
							"description": "",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "topia-env-development.us-west-2.elasticbeanstalk.com/users/profile",
					"host": [
						"topia-env-development",
						"us-west-2",
						"elasticbeanstalk",
						"com"
					],
					"path": [
						"users",
						"profile"
					]
				},
				"description": "Using the remove mode."
			},
			"response": []
		},
		{
			"name": "Modify_Remove Cleanup",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"",
							"",
							"// This will need to be updated once the job table is added",
							"pm.sendRequest({",
							"    url: \"topia-env-development.us-west-2.elasticbeanstalk.com/users/profile\",",
							"    method: 'GET',",
							"    header: { Authorization:'Bearer topiadev' },",
							"    }, function (err, response) {",
							"    pm.test('Value has changed', function() {",
							"        let jsonData = response.json();",
							"        jsonData = jsonData[\"email\"];",
							"        pm.expect(jsonData === pm.variables.get(\"email\")).to.be.true;",
							"    });",
							"});",
							"",
							"pm.test('No error', function() {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(jsonData.err).to.be.undefined;",
							"});",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							""
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "topiadev",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/x-www-form-urlencoded"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "mode",
							"value": "modify",
							"description": "",
							"type": "text"
						},
						{
							"key": "key",
							"value": "email",
							"description": "",
							"type": "text"
						},
						{
							"key": "value",
							"value": "{{email}}",
							"description": "",
							"type": "text"
						},
						{
							"key": "type",
							"value": "single",
							"description": "",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "topia-env-development.us-west-2.elasticbeanstalk.com/users/profile",
					"host": [
						"topia-env-development",
						"us-west-2",
						"elasticbeanstalk",
						"com"
					],
					"path": [
						"users",
						"profile"
					]
				},
				"description": "Using the remove mode."
			},
			"response": []
		},
		{
			"name": "Modify_ListAppend",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"",
							"const TEST_VAL = \"testType\"",
							"",
							"pm.sendRequest({",
							"    url: \"topia-env-development.us-west-2.elasticbeanstalk.com/users/profile\",",
							"    method: 'GET',",
							"    header: { Authorization:'Bearer topiadev' },",
							"    }, function (err, response) {",
							"    pm.test('Contains new type', function() {",
							"        let jsonData = response.json();",
							"        jsonData = jsonData[\"prefs_jobs_types\"];",
							"        let contains = false;",
							"        ",
							"        for( let i = 0; i < jsonData.length; i++ ){",
							"            if( jsonData[i] === TEST_VAL ){",
							"                contains = true;",
							"            }",
							"        }",
							"        ",
							"        pm.expect(contains).to.be.true;",
							"        ",
							"    });",
							"});",
							"",
							"pm.test('No error', function() {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(jsonData.err).to.be.undefined;",
							"});",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});"
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "topiadev",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/x-www-form-urlencoded"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "mode",
							"value": "listappend",
							"description": "",
							"type": "text"
						},
						{
							"key": "key",
							"value": "prefs_jobs_types",
							"description": "",
							"type": "text"
						},
						{
							"key": "value",
							"value": "testType",
							"description": "",
							"type": "text"
						},
						{
							"key": "type",
							"value": "single",
							"description": "",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "topia-env-development.us-west-2.elasticbeanstalk.com/users/profile",
					"host": [
						"topia-env-development",
						"us-west-2",
						"elasticbeanstalk",
						"com"
					],
					"path": [
						"users",
						"profile"
					]
				},
				"description": "Using listappend mode."
			},
			"response": []
		},
		{
			"name": "Modify_ListRemove",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"",
							"const TEST_VAL = \"testType\"",
							"",
							"pm.sendRequest({",
							"    url: \"topia-env-development.us-west-2.elasticbeanstalk.com/users/profile\",",
							"    method: 'GET',",
							"    header: { Authorization:'Bearer topiadev' },",
							"    }, function (err, response) {",
							"    pm.test('Contains new type', function() {",
							"        let jsonData = response.json();",
							"        jsonData = jsonData[\"prefs_jobs_types\"];",
							"        let contains = false;",
							"        ",
							"        for( let i = 0; i < jsonData.length; i++ ){",
							"            if( jsonData[i] === TEST_VAL ){",
							"                contains = true;",
							"            }",
							"        }",
							"        ",
							"        pm.expect(contains).to.be.false;",
							"        ",
							"    });",
							"});",
							"",
							"pm.test('No error', function() {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(jsonData.err).to.be.undefined;",
							"});",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});"
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "topiadev",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/x-www-form-urlencoded"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "mode",
							"value": "listremove",
							"description": "",
							"type": "text"
						},
						{
							"key": "key",
							"value": "prefs_jobs_types",
							"description": "",
							"type": "text"
						},
						{
							"key": "value",
							"value": "testType",
							"description": "",
							"type": "text"
						},
						{
							"key": "type",
							"value": "single",
							"description": "",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "topia-env-development.us-west-2.elasticbeanstalk.com/users/profile",
					"host": [
						"topia-env-development",
						"us-west-2",
						"elasticbeanstalk",
						"com"
					],
					"path": [
						"users",
						"profile"
					]
				},
				"description": "Using listappend mode."
			},
			"response": []
		},
		{
			"name": "Modify_ModifyMultiple",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"",
							"const TEST_DATE = 89;",
							"const TEST_EMAIL = \"testEmail@email.com\";",
							"const TEST_JOBS = [",
							"        \"Software Engineer\",",
							"        \"Developer\",",
							"        \"Java\"",
							"    ]",
							"",
							"pm.sendRequest({",
							"    url: \"topia-env-development.us-west-2.elasticbeanstalk.com/users/profile\",",
							"    method: 'GET',",
							"    header: { Authorization:'Bearer topiadev' },",
							"    }, function (err, response) {",
							"    pm.test('Value has changed', function() {",
							"        let jsonData = response.json();",
							"        let date = jsonData[\"prefs_jobs_postedDate\"];",
							"        let email = jsonData[\"email\"];",
							"        let jobs = jsonData[\"prefs_jobs_titles\"];",
							"",
							"        pm.expect(date  === TEST_DATE).to.be.true;",
							"        pm.expect(email === TEST_EMAIL).to.be.true;",
							"        ",
							"        // Compare jobs arrays",
							"        let test_jobs = TEST_JOBS.sort();",
							"        jobs = jobs.sort();",
							"        let arraysSame = jobs.length === test_jobs.length ? true : false;",
							"        for(let i = 0; i < test_jobs.length; i++){",
							"            if ( test_jobs[i] !== jobs[i] ){",
							"                arraysSame = false;",
							"            }",
							"        }",
							"        pm.expect(arraysSame).to.be.true;",
							"",
							"    });",
							"});",
							"",
							"pm.test('No error', function() {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(jsonData.err).to.be.undefined;",
							"});",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});"
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "topiadev",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"prefs\":{\n    \"email\": \"testEmail@email.com\",\n    \"prefs_jobs_postedDate\": 89,\n    \"prefs_jobs_titles\": [\n          \"Software Engineer\",\n          \"Developer\",\n          \"Java\"\n      ]\n  },\n  \"type\": \"multiple\"\n}"
				},
				"url": {
					"raw": "topia-env-development.us-west-2.elasticbeanstalk.com/users/profile",
					"host": [
						"topia-env-development",
						"us-west-2",
						"elasticbeanstalk",
						"com"
					],
					"path": [
						"users",
						"profile"
					]
				},
				"description": "Using the modify mode."
			},
			"response": []
		},
		{
			"name": "Modify_ModifyMultiple Cleanup",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"",
							"const TEST_DATE = parseInt( pm.environment.get(\"prefs_jobs_postedDate\") );",
							"const TEST_EMAIL = pm.environment.get(\"email\");",
							"const TEST_JOBS = pm.environment.get(\"prefs_jobs_titles\");",
							"",
							"",
							"pm.sendRequest({",
							"    url: \"topia-env-development.us-west-2.elasticbeanstalk.com/users/profile\",",
							"    method: 'GET',",
							"    header: { Authorization:'Bearer topiadev' },",
							"    }, function (err, response) {",
							"    pm.test('Values were reverted', function() {",
							"        let jsonData = response.json();",
							"        let date = jsonData[\"prefs_jobs_postedDate\"];",
							"        let email = jsonData[\"email\"];",
							"        let jobs = jsonData[\"prefs_jobs_titles\"];",
							"",
							"        pm.expect(date === TEST_DATE).to.be.true;",
							"        pm.expect(email === TEST_EMAIL).to.be.true;",
							"        ",
							"        // Compare jobs arrays",
							"        let test_jobs = JSON.parse(TEST_JOBS).sort();",
							"        jobs = jobs.sort();",
							"        let arraysSame = jobs.length === test_jobs.length ? true : false;",
							"        for(let i = 0; i < test_jobs.length; i++){",
							"            if ( test_jobs[i] !== jobs[i] ){",
							"                arraysSame = false;",
							"            }",
							"        }",
							"        pm.expect(arraysSame).to.be.true;",
							"    });",
							"});",
							"",
							"pm.test('No error', function() {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(jsonData.err).to.be.undefined;",
							"});",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});"
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "topiadev",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"prefs\":{\n\t\t\"prefs_jobs_titles\": {{prefs_jobs_titles}},\n\t\t\"email\": \"{{email}}\",\n\t\t\"prefs_jobs_postedDate\": \"{{prefs_jobs_postedDate}}\"\n\t},\n\t\"type\": \"multiple\"\n}"
				},
				"url": {
					"raw": "topia-env-development.us-west-2.elasticbeanstalk.com/users/profile",
					"host": [
						"topia-env-development",
						"us-west-2",
						"elasticbeanstalk",
						"com"
					],
					"path": [
						"users",
						"profile"
					]
				},
				"description": "Using the modify mode."
			},
			"response": []
		},
		{
			"name": "UpdateCityRatings Setup",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"",
							"const TEST_TITLE = \"blackjack\"",
							"",
							"",
							"pm.sendRequest({",
							"    url: \"topia-env-development.us-west-2.elasticbeanstalk.com/users/profile\",",
							"    method: 'GET',",
							"    header: { Authorization:'Bearer topiadev' },",
							"    }, function (err, response) {",
							"    pm.test('Value has changed', function() {",
							"        let jsonData = response.json();",
							"        let title = jsonData[\"prefs_jobs_titles\"];",
							"",
							"        pm.expect( title.length === 1 ).to.be.true;",
							"        pm.expect( title[0] === TEST_TITLE ).to.be.true;",
							"    });",
							"});",
							"",
							"pm.test('No error', function() {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(jsonData.err).to.be.undefined;",
							"});",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});"
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "topiadev",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"prefs\":{\n\t\t\"prefs_jobs_titles\": [\"blackjack\"]\n\t},\n\t\"type\": \"multiple\"\n}"
				},
				"url": {
					"raw": "topia-env-development.us-west-2.elasticbeanstalk.com/users/profile",
					"host": [
						"topia-env-development",
						"us-west-2",
						"elasticbeanstalk",
						"com"
					],
					"path": [
						"users",
						"profile"
					]
				},
				"description": "Using the modify mode."
			},
			"response": []
		},
		{
			"name": "UpdateCityRatings",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"",
							"const TEST_CITY = \"Las Vegas\"",
							"",
							"let schema = {",
							"    type: \"object\",",
							"};",
							"",
							"pm.sendRequest({",
							"    url: \"topia-env-development.us-west-2.elasticbeanstalk.com/users/profile\",",
							"    method: 'GET',",
							"    header: { Authorization:'Bearer topiadev' },",
							"    }, function (err, response) {",
							"    pm.test('City ranking correct', function() {",
							"        let jsonData = response.json();",
							"        let cityMatches = jsonData[\"cityMatch\"];",
							"        ",
							"        pm.expect( cityMatches[TEST_CITY].ranking === 1 ).to.be.true;",
							"        pm.expect( cityMatches[TEST_CITY].rating === 100.0 ).to.be.true;",
							"    });",
							"});",
							"",
							"pm.test('No error', function() {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(jsonData.err).to.be.undefined;",
							"});",
							"",
							"pm.test('An object was returned', function() {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(tv4.validate(jsonData, schema)).to.be.true;",
							"});",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});"
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "topiadev",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/x-www-form-urlencoded"
					}
				],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "topia-env-development.us-west-2.elasticbeanstalk.com/users/profile/ratings",
					"host": [
						"topia-env-development",
						"us-west-2",
						"elasticbeanstalk",
						"com"
					],
					"path": [
						"users",
						"profile",
						"ratings"
					]
				},
				"description": "Using the modify mode."
			},
			"response": []
		},
		{
			"name": "UpdateCityRatings Cleanup",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"",
							"const TEST_TITLES = JSON.parse( pm.environment.get(\"prefs_jobs_titles\") );",
							"",
							"pm.sendRequest({",
							"    url: \"topia-env-development.us-west-2.elasticbeanstalk.com/users/profile\",",
							"    method: 'GET',",
							"    header: { Authorization:'Bearer topiadev' },",
							"    }, function (err, response) {",
							"    pm.test('Values were reverted', function() {",
							"        let jsonData = response.json();",
							"        let titles = jsonData[\"prefs_jobs_titles\"];",
							"        ",
							"        // Make sure arrays are equal",
							"        arraysEqual = ( titles.length === TEST_TITLES.length ) &&",
							"                        titles.every( ( elem, index ) => {",
							"                            return elem === TEST_TITLES[index];",
							"                        });",
							"",
							"        pm.expect( arraysEqual ).to.be.true;",
							"    });",
							"});",
							"",
							"pm.test('No error', function() {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(jsonData.err).to.be.undefined;",
							"});",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});"
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "topiadev",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"prefs\":{\n\t\t\"prefs_jobs_titles\": {{prefs_jobs_titles}}\n\t},\n\t\"type\": \"multiple\"\n}"
				},
				"url": {
					"raw": "topia-env-development.us-west-2.elasticbeanstalk.com/users/profile",
					"host": [
						"topia-env-development",
						"us-west-2",
						"elasticbeanstalk",
						"com"
					],
					"path": [
						"users",
						"profile"
					]
				},
				"description": "Using the modify mode."
			},
			"response": []
		},
		{
			"name": "Login",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"const CHAR_SIZE = 40;",
							"// This can be exposed for now because it's a test.",
							"// This value will not be the same in the final product, nor will these tests",
							"// be public.",
							"const EXPR_TIME = 7776000000 + 60000; // Expiration time plus one minute as a buffer",
							"",
							"let schema = {",
							"    type: \"object\",",
							"    properties: {",
							"        \"token\": { type: \"string\" }",
							"    }",
							"}",
							"",
							"// This will need to be updated once the job table is added",
							"pm.test('Expiration date updated', function(){",
							"    let token = pm.response.json().token;",
							"    pm.sendRequest({",
							"    url: \"topia-env-development.us-west-2.elasticbeanstalk.com/users/profile\",",
							"    method: 'GET',",
							"    header: 'Authorization:Bearer ' + token,",
							"    }, function (err, response) {",
							"        let jsonData = response.json();",
							"        let expr = jsonData.accessToken_expr;",
							"        let currentTime = Date.now();",
							"        pm.expect(expr <= (currentTime + EXPR_TIME)).to.be.true;",
							"    });",
							"});",
							"",
							"pm.test('Access token returned', function() {",
							"        let jsonData = pm.response.json();",
							"        pm.expect(tv4.validate(jsonData, schema)).to.be.true;",
							"        pm.expect(jsonData.token.length == CHAR_SIZE).to.be.true;",
							"});",
							"",
							"pm.test('No error', function() {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(jsonData.err).to.be.undefined;",
							"});",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.environment.set(\"testUserToken\", pm.response.json()[\"token\"]);"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/x-www-form-urlencoded"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "username",
							"value": "testUser",
							"description": "",
							"type": "text"
						},
						{
							"key": "email",
							"value": "testerUser@email.com",
							"description": "",
							"type": "text",
							"disabled": true
						},
						{
							"key": "password",
							"value": "testUser123456",
							"description": "",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "topia-env-development.us-west-2.elasticbeanstalk.com/auth/login",
					"host": [
						"topia-env-development",
						"us-west-2",
						"elasticbeanstalk",
						"com"
					],
					"path": [
						"auth",
						"login"
					]
				},
				"description": ""
			},
			"response": []
		},
		{
			"name": "Logout",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"const EXPIRED_TIME = 1;",
							"",
							"// This will need to be updated once the job table is added",
							"pm.sendRequest({",
							"    url: \"topia-env-development.us-west-2.elasticbeanstalk.com/users/profile\",",
							"    method: 'GET',",
							"    header: 'Authorization:Bearer ' + pm.environment.get(\"testUserToken\"),",
							"    }, function (err, response) {",
							"        pm.test('Profile Expired', function(){",
							"            let jsonData = response.json();",
							"            pm.expect(jsonData).to.have.property(\"err\");",
							"            pm.expect(jsonData.err.type == \"TokenExpired\").to.be.true;",
							"        });",
							"});",
							"",
							"pm.test('No error', function() {",
							"    let jsonData = pm.response.json();",
							"    pm.expect(jsonData.err).to.be.undefined;",
							"});",
							"",
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});"
						]
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{testUserToken}}",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/x-www-form-urlencoded"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "username",
							"value": "testUser",
							"description": "",
							"type": "text",
							"disabled": true
						},
						{
							"key": "email",
							"value": "testerUser@email.com",
							"description": "",
							"type": "text",
							"disabled": true
						},
						{
							"key": "password",
							"value": "testUser123456",
							"description": "",
							"type": "text",
							"disabled": true
						}
					]
				},
				"url": {
					"raw": "topia-env-development.us-west-2.elasticbeanstalk.com/auth/logout",
					"host": [
						"topia-env-development",
						"us-west-2",
						"elasticbeanstalk",
						"com"
					],
					"path": [
						"auth",
						"logout"
					]
				},
				"description": ""
			},
			"response": []
		}
	]
}